tokens_file: "coingecko_api_tokens.json"

# Cache configuration
cache:
  go_cache:
    default_expiration: 5m    # 5 minutes
    cleanup_interval: 10m     # 10 minutes

# CoinGecko API keys rate limits
api_key_settings:
  pro:
    rate_limit_per_minute: 250
    burst: 5
  demo:
    rate_limit_per_minute: 30
    burst: 2
  nokey:
    rate_limit_per_minute: 30
    burst: 1

coingecko_leaderboard:
  top_markets_update_interval: 30m
  top_markets_limit: 5000
  currency: usd
  top_prices_update_interval: 30s # 30 seconds interval for price updates
  top_prices_limit: 500         # maximum number of top tokens to track prices

coingecko_markets:
  ttl: 35m
  market_params_normalize:
    vs_currency: "usd"        # always use USD regardless of user request
    order: "market_cap_desc"  # always order by market cap
    per_page: 250             # always use max per page
    sparkline: false          # never include sparkline data
    price_change_percentage: "1h,24h"  # always include 1h and 24h price changes
    category: ""              # never filter by category
    include_rehypothecated: true       # always fetch rehypothecated tokens (stETH, WETH, WBTC)
  
  tiers:
    - name: "top-500"
      page_from: 1
      page_to: 2
      update_interval: 30s

    - name: "top-501-5000"
      page_from: 3
      page_to: 20
      update_interval: 30m
      fetch_coinslist_ids: true # fetch extra prices (from coins/list)

coingecko_prices:
  chunk_size: 500             # number of tokens to fetch in one request
  ttl: 10m
  currencies:                 # default currencies
    - usd
    - eur
    - btc
    - eth
  
  tiers:
    - name: "top-1000"
      token_from: 1
      token_to: 1000
      update_interval: 30s

    - name: "top-1001-5000"
      token_from: 1001
      token_to: 5000
      update_interval: 5m
      fetch_coinslist_ids: true # fetch extra prices (from coins/list)

coingecko_market_chart:
  hourly_ttl: 30m             # TTL for hourly data (requests with days <= daily_data_threshold)
  daily_ttl: 12h              # TTL for daily data (requests with days > daily_data_threshold)  
  daily_data_threshold: 90    # threshold in days: <= 90 days = hourly data, > 90 days = daily data
  try_free_api_first: true    # try free API (no key) first when no interval is specified

coingecko_coinslist:
  update_interval: 30m
  supported_platforms:
    - ethereum
    - optimistic-ethereum
    - arbitrum-one
    - base
    - linea
    - status
    - binance-smart-chain

coingecko_token_list:
  update_interval: 5m
  supported_platforms:
    - ethereum
    - optimistic-ethereum
    - arbitrum-one
    - base
    - linea
    - binance-smart-chain

coingecko_coins:
  name: "coins"
  endpoint_path: "/api/v3/coins/{{id}}"
  ttl: 72h                     # 3 days cache for coin data
  
  # Query parameters for API requests (reduce response)
  params_override:
    localization: false
    tickers: false
    market_data: false
    community_data: false
    developer_data: false
    sparkline: false
  
  tiers:
    - name: "top-500"
      id_from: 1
      id_to: 500
      update_interval: 24h

    - name: "top-501-10000"
      id_from: 501
      id_to: 10000
      update_interval: 72h
      fetch_coinslist_ids: true
